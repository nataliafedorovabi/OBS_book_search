"""Описание глав книги для умного расширения запросов."""

CHAPTERS_INFO = """
=== R628: УПРАВЛЕНИЕ ОРГАНИЗАЦИЕЙ И ПЕРСОНАЛОМ ===

Глава 1. Что делают менеджеры?
- Роли менеджера, функции управления, навыки менеджера

Глава 2. Общение и управление коммуникацией
- Модель коммуникаций, барьеры коммуникации

Глава 3. Решение проблем и принятие решений
- Модели принятия решений, рациональный подход

Глава 4. Планирование и контроль
- Стратегическое и оперативное планирование

Глава 5. Управление информацией
- Информационные системы

Глава 6. Понимание людей на работе
- Теория мотивации Герцберга, психологический контракт

Глава 7. Понимание лидерства
- Стили лидерства, ситуационное лидерство

Глава 8. Работа в группах и командах
- Групповая динамика, роли в команде (Белбин)

Глава 9. Найм персонала
- Отбор и подбор, собеседование

Глава 10. Управление деятельностью
- Оценка результативности, MBO

Глава 11. Обучение и развитие персонала
- Методы обучения, наставничество

Глава 12. Организационная культура
- Модель EFQM, ценности организации

Глава 13. Организация и внешнее окружение
- Анализ внешней среды, стейкхолдеры, СТЭЭП-факторы

Глава 14. Управление изменениями
- Модели изменений, сопротивление изменениям

=== R629: УПРАВЛЕНИЕ МАРКЕТИНГОМ И ФИНАНСАМИ ===

Глава 1. Что такое маркетинг?
- Определение маркетинга, покупатели и потребители

Глава 2. Удовлетворенность потребителей
- Удовлетворенность и качество

Глава 3. Сегментация рынка и позиционирование
- Методы сегментации, нацеливание

Глава 4. Понимание потребителей
- Факторы поведения потребителя

Глава 5. Товары и услуги
- Ценность и качество, отличия услуг от товаров

Глава 6. Маркетинговая смесь (4P)
- Продукт, Цена, Место, Продвижение

Глава 7. Маркетинговая смесь для услуг (7P)
- Люди, Процесс, Физические свидетельства

Глава 8. Управление маркетинговой информацией
- Маркетинговые исследования

Глава 9. Маркетинговый план
- Компоненты плана

Глава 10-12. Бюджеты
- Функция бюджета, подходы к бюджетированию, СТЭЭП-факторы

Глава 13-14. Затраты
- Измерение затрат, ABC

Глава 15. Принятие финансовых решений

Глава 16. Финансовая отчетность
- Отчет о доходах, балансовый отчет

Глава 17. Движение денежных средств
- Поток денег, оборотный капитал

Глава 18-19. Анализ и управление
- Финансовые показатели, BSC
"""

KNOWN_TERMS = {
    'герцберг', 'белбин', 'минцберг', 'файоль',
    'swot', 'pest', 'efqm', 'kpi', 'mbo', 'bsc',
    'мотивация', 'лидерство', 'коммуникация',
    'организационная культура', 'групповая динамика',
    'маркетинг', 'сегментация', 'позиционирование',
    '4p', '7p', 'маркетинговая смесь',
    'бюджет', 'затраты', 'безубыточность',
    'баланс', 'денежный поток', 'рентабельность',
    'стээп', 'steep',
}

# Словарь опечаток и синонимов -> правильный термин
TYPO_CORRECTIONS = {
    # СТЭЭП/STEEP варианты
    'стэпп': 'стээп',
    'стэп': 'стээп',
    'степп': 'стээп',
    'steep': 'стээп',
    'стип': 'стээп',
    # PEST/ПЕСТ
    'пест': 'pest',
    'песте': 'pest',
    # SWOT
    'свот': 'swot',
    'свот-анализ': 'swot',
    # Герцберг
    'герцберга': 'герцберг',
    'херцберг': 'герцберг',
    # Белбин
    'белбина': 'белбин',
    'бэлбин': 'белбин',
    # Минцберг
    'минцберга': 'минцберг',
    'минсберг': 'минцберг',
    # Файоль
    'файоля': 'файоль',
    'фейоль': 'файоль',
    # BSC
    'бсс': 'bsc',
    'бск': 'bsc',
}


def correct_typo(word: str) -> str:
    """Исправляет известные опечатки."""
    word_lower = word.lower()
    return TYPO_CORRECTIONS.get(word_lower, word_lower)


BOOK_NAMES = {
    "R628": "Управление организацией и персоналом",
    "R629": "Управление маркетингом и финансами",
}


def get_book_display_name(book_title: str) -> str:
    """Преобразует внутреннее имя книги в отображаемое."""
    if "R628_book" in book_title:
        part = book_title.replace("R628_book", "")
        return f"R628 Часть {part}"
    elif "R629_book" in book_title:
        part = book_title.replace("R629_book", "")
        return f"R629 Часть {part}"
    return book_title


def get_book_code(book_title: str) -> str:
    """Извлекает код книги (R628 или R629) из названия."""
    if "R628" in book_title:
        return "R628"
    elif "R629" in book_title:
        return "R629"
    return ""
